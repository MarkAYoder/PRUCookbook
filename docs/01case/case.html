<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>Case Studies - Introduction</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article">
<div id="header">
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_case_studies_introduction">1. Case Studies - Introduction</a>
<ul class="sectlevel2">
<li><a href="#_robotics_control_library">1.1. Robotics Control Library</a></li>
<li><a href="#_beaglelogic_a_14_channel_logic_analyzer">1.2. BeagleLogic - a 14-channel Logic Analyzer</a></li>
<li><a href="#_neopixels_5050_rgb_leds_with_integrated_drivers_falcon_christmas">1.3. NeoPixels - 5050 RGB LEDs with Integrated Drivers (Falcon Christmas)</a></li>
<li><a href="#case_rgb_matrix">1.4. RGB LED Matrix - No Integrated Drivers (Falcon Christmas)</a></li>
<li><a href="#_machinekit">1.5. MachineKit</a></li>
<li><a href="#_ardupilot">1.6. ArduPilot</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="paragraph">
<p><a href="../index.html">Outline</a></p>
</div>
<div class="sect1">
<h2 id="_case_studies_introduction"><a class="link" href="#_case_studies_introduction">1. Case Studies - Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>It&#8217;s an exciting time to be making projects that use embedded processors.
Make:'s <a href="https://makezine.com/comparison/boards/">Makers' Guide to Boards</a> shows
many of the options that are available and groups them into different types.
<em>Single board computers</em> (SBCs) generally run Linux on some sort of <a href="https://www.arm.com/">ARM</a>
processor.  Examples are the BeagleBoard and the Raspberry Pi.  Another type
is the <em>microcontroller</em>, of which the <a href="https://www.arduino.cc/">Arduino</a> is
popular.</p>
</div>
<div class="paragraph">
<p>The SBCs are used because they have an operating system to manage files, I/O,
and schedule when things are run, all while possibly talking to the Internet.
Microcontrollers shine when things
being interfaced require careful timing and can&#8217;t afford to have an OS preempt an
operation.</p>
</div>
<div class="paragraph">
<p>But what if you have a project that needs the flexibility of an OS and the timing
of a microcontroller?  This is where the BeagleBoard excels since it has both
an ARM procssor running Linux and two <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>;
<strong>P</strong>rogrammable <strong>R</strong>eal-Time <strong>U</strong>nits (PRUs).
The PRUs have 32-bit cores which run
independently of the ARM processor, therefore they can
be programmed to respond quickly to inputs and produce very precisely timed
outputs.</p>
</div>
<div class="paragraph">
<p>There are many <a href="../projects.html">projects</a> that use the PRU.
They are able to do things that can&#8217;t be done with just a SBC or just a microcontroller.
Here we present some case studies that give a high-level view of using the PRUs.  In later
chapters you will see the details of how they work.</p>
</div>
<div class="paragraph">
<p>Here we present:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Robotics Control Library <a href="http://strawsondesign.com/docs/roboticscape/" class="bare">http://strawsondesign.com/docs/roboticscape/</a></p>
</li>
<li>
<p>BeagleLogic <a href="https://github.com/abhishek-kakkar/BeagleLogic/wiki" class="bare">https://github.com/abhishek-kakkar/BeagleLogic/wiki</a></p>
</li>
<li>
<p>NeoPixels - 5050 RGB LEDs with Integrated Drivers (Falcon Christmas) <a href="http://falconchristmas.com" class="bare">http://falconchristmas.com</a></p>
</li>
<li>
<p>RGB LED Matrix (Falcon Christmas) <a href="http://falconchristmas.com" class="bare">http://falconchristmas.com</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following are resources used in this chapter.</p>
</div>
<div class="ulist">
<div class="title">Resources</div>
<ul>
<li>
<p><a href="https://github.com/beagleboard/pocketbeagle/wiki/System-Reference-Manual#673_PRUICSS_Pin_Access">Pocket Beagle System Reference Manual</a></p>
</li>
<li>
<p><a href="https://github.com/derekmolloy/exploringBB/blob/master/chp06/docs/BeagleboneBlackP8HeaderTable.pdf">BeagleBone Black P8 Header Table</a></p>
</li>
<li>
<p><a href="https://github.com/derekmolloy/exploringBB/blob/master/chp06/docs/BeagleboneBlackP9HeaderTable.pdf">BeagleBone Black P9 Header Table</a></p>
</li>
<li>
<p><a href="https://github.com/beagleboard/beaglebone-ai/wiki/System-Reference-Manual">BeagleBone AI System Reference Manual</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_robotics_control_library"><a class="link" href="#_robotics_control_library">1.1. Robotics Control Library</a></h3>
<div class="paragraph">
<p>Robotics is an embedded application that often requires both an SBC to control the
high-level tasks (such as path planning, line following, communicating with the user)
<em>and</em> a microcontroller to handle the low-level tasks (such as telling motors how fast
to turn, or how to balance in response to an IMU input).  The
<a href="https://www.ucsdrobotics.org/edumip">EduMIP</a> balancing
<a href="https://www.hackster.io/edumip/edumip-13a29c">robot</a>
demonstrates that by using the PRU, the Blue can handle both the high
and low -level tasks without an additional microcontroller. The EduMIP is shown
in <a href="#case_blue">Blue balancing</a>.</p>
</div>
<div id="case_blue" class="paragraph">
<div class="title">Blue balancing</div>
<p><span class="image"><img src="figures/blue.png" alt="Blue balancing"></span></p>
</div>
<div class="paragraph">
<p>The <a href="http://strawsondesign.com/docs/roboticscape/">Robotics Control Library</a> is a
package that is already installed on the Beagle
that contains a C library and example/testing programs. It uses the PRU to extend the
real-time hardware of the Bone by adding eight addional servo channels and one
addition real-time encoder input.</p>
</div>
<div class="paragraph">
<p>The following examples show how easy it is to use the PRU for robotics.</p>
</div>
<div class="sect3">
<h4 id="_controlling_eight_servos"><a class="link" href="#_controlling_eight_servos">Controlling Eight Servos</a></h4>
<div class="sect4">
<h5 id="_problem"><a class="link" href="#_problem">Problem</a></h5>
<div class="paragraph">
<p>You need to control eight servos, but the Bone doesn&#8217;t have enough pulse width
modulation (PWM) channels
and you don&#8217;t want to add hardware.</p>
</div>
</div>
<div class="sect4">
<h5 id="_solution"><a class="link" href="#_solution">Solution</a></h5>
<div class="paragraph">
<p>The Robotics Control Library provides eight additional PWM channels via the PRU that can be used out of the box.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The I/O pins on the Beagles have a mutliplexer that lets you select what I/O
appears on a given pin.  The Blue has the mux already configured to to run these
examples.  Follow the instructions in
<a href="../03details/details.html#details_configure_servos">Configuring Pins for Controlling Servos</a>
to configure the pins for the Black and the Pocket.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Just run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>sudo rc_test_servos -f 10 -p 1.5</strong></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>-f 10</code> says to use a frequency of 10 Hz and the <code>-p 1.5</code> says to set the position to <code>1.5</code>.  The range of positions is
<code>-1.5</code> to <code>1.5</code>.   Run <code>rc_test_servos -h</code> to see all the options.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>rc_test_servos -h</strong>

 Options
 -c {channel}   Specify one channel from 1-8.
                Otherwise all channels will be driven equally
 -f {hz}        Specify pulse frequency, otherwise 50hz is used
 -p {position}  Drive servo to a position between -1.5 &amp; 1.5
 -w {width_us}  Send pulse width in microseconds (us)
 -s {limit}     Sweep servo back/forth between +- limit
                Limit can be between 0 &amp; 1.5
 -r {ch}        Use DSM radio channel {ch} to control servo
 -h             Print this help messege

sample use to center servo channel 1:
   rc_test_servo -c 1 -p 0.0</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_discussion"><a class="link" href="#_discussion">Discussion</a></h5>
<div class="paragraph">
<p>The BeagleBone Blue sends these eight outputs to it&#8217;s servo channels.  The others use the pins shown in the
<a href="#case__register_to_pin_table">PRU register to pin table</a>.</p>
</div>
<table id="case__register_to_pin_table" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. PRU register to pin table</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">PRU pin</th>
<th class="tableblock halign-left valign-top">Blue pin</th>
<th class="tableblock halign-left valign-top">Black pin</th>
<th class="tableblock halign-left valign-top">Pocket pin</th>
<th class="tableblock halign-left valign-top">AI pin</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pru1_r30_8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P2.35</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pru1_r30_10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_28</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1.35</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P9_42</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pru1_r30_9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_29</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1.02</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_14</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pru1_r30_11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_30</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1.04</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P9_27</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pru1_r30_6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_39</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_19</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pru1_r30_7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_40</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pru1_r30_4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_41</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">pru1_r30_5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_42</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_18</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can find these details in the
<a href="https://github.com/derekmolloy/exploringBB/blob/master/chp06/docs/BeagleboneBlackP8HeaderTable.pdf">P8 Header Table</a>,
<a href="https://github.com/derekmolloy/exploringBB/blob/master/chp06/docs/BeagleboneBlackP9HeaderTable.pdf">P9 Header Table</a>,
<a href="https://github.com/beagleboard/pocketbeagle/wiki/System-Reference-Manual#673_PRUICSS_Pin_Access">Pocket Beagle System Reference Manual</a>
(Here is a more usable version of the <a href="https://docs.google.com/spreadsheets/d/1FRGvYOyW1RiNSEVprvstfJAVeapnASgDXHtxeDOjgqw/edit?usp=sharing">table</a>.)
and
<a href="https://github.com/beagleboard/beaglebone-ai/wiki/System-Reference-Manual">BeagleBone AI System Reference Manual</a>.
(Here is a more usable version of the <a href="https://docs.google.com/spreadsheets/d/1dFSBVem86vAUD7MLXvqdS-N0Efi8_g_O1iTqzql8DAo/edit#gid=0">table</a>.)</p>
</div>
<div class="paragraph">
<p>Be default the PRUs are already loaded with the code needed to run the
servos.  All you have to do is run the command.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_controlling_individual_servos"><a class="link" href="#_controlling_individual_servos">Controlling Individual Servos</a></h4>
<div class="sect4">
<h5 id="_problem_2"><a class="link" href="#_problem_2">Problem</a></h5>
<div class="paragraph">
<p><code>rc_test_servos</code> is nice, but I need to control the servos individually.</p>
</div>
</div>
<div class="sect4">
<h5 id="_solution_2"><a class="link" href="#_solution_2">Solution</a></h5>
<div class="paragraph">
<p>You can modify <code>rc_test_servos.c</code>.  You&#8217;ll find it on the bone online at
&lt;<a href="https://github.com/beagleboard/librobotcontrol/blob/master/examples/src/rc_test_servos.c" class="bare">https://github.com/beagleboard/librobotcontrol/blob/master/examples/src/rc_test_servos.c</a>.</p>
</div>
<div class="paragraph">
<p>Just past line 250 you&#8217;ll find a <code>while</code> loop that has calls to <code>rc_servo_send_pulse_normalized(ch,servo_pos)</code> and
<code>rc_servo_send_pulse_us(ch, width_us)</code>.  The first call sets the pulse width relative to the pulse period; the other
sets the width to an absolute time.  Use whichever works for you.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_controlling_more_than_eight_channels"><a class="link" href="#_controlling_more_than_eight_channels">Controlling More Than Eight Channels</a></h4>
<div class="sect4">
<h5 id="_problem_3"><a class="link" href="#_problem_3">Problem</a></h5>
<div class="paragraph">
<p>I need more than eight PWM channels, or I need less jitter on the off time.</p>
</div>
</div>
<div class="sect4">
<h5 id="_solution_3"><a class="link" href="#_solution_3">Solution</a></h5>
<div class="paragraph">
<p>This is a more advanced problem and required reprograming the PRUs.  See
<a href="../05blocks/blocks.html#blocks_pwm">PWM Generator</a> for an example.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_reading_hardware_encoders"><a class="link" href="#_reading_hardware_encoders">Reading Hardware Encoders</a></h4>
<div class="sect4">
<h5 id="_problem_4"><a class="link" href="#_problem_4">Problem</a></h5>
<div class="paragraph">
<p>I want to use four encoders to measure four motors, but I only see hardware for three.</p>
</div>
</div>
<div class="sect4">
<h5 id="_solution_4"><a class="link" href="#_solution_4">Solution</a></h5>
<div class="paragraph">
<p>The forth encoder can be implemented on the PRU. If you run <code>rc_test_encoders_eqep</code> on the Blue, you will see the output of
encoders E1-E3 which are connected to the eEQP hardware.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>rc_test_encoders_eqep</strong>

Raw encoder positions
      E1   |      E2   |      E3   |
         0 |         0 |         0 |^C</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also access these hardware encoders on the Black and Pocket using the
pins shown in <a href="#case_pin_mapping">eQEP to pin mapping</a>.</p>
</div>
<table id="case_pin_mapping" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. eQEP to pin mapping</caption>
<colgroup>
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">eQEP</th>
<th class="tableblock halign-left valign-top">Blue pin</th>
<th class="tableblock halign-left valign-top">Black pin A</th>
<th class="tableblock halign-left valign-top">Black pin B</th>
<th class="tableblock halign-left valign-top">AI pin A</th>
<th class="tableblock halign-left valign-top">AI pin B</th>
<th class="tableblock halign-left valign-top">Pocket pin A</th>
<th class="tableblock halign-left valign-top">Pocket pin B</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P9_42B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P9_27</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P1.31</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P2.24</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_35</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_33</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_35</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_33</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P2.10</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P2.24</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P2.33</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_41</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_42</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P9_19</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P9_41</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">E4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_15</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P2.09</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P2.18</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P8_24</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P9_42</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">P9_27</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The I/O pins on the Beagles have a mutliplexer that lets you select what I/O
appears on a given pin.  The Blue has the mux already configured to to run these
examples.  Follow the instructions in
<a href="../03details/details.html#details_configure_encoders">Configuring Pins for Controlling Encoders</a>
to configure the pins for the Black and the Pocket.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_reading_pru_encoder"><a class="link" href="#_reading_pru_encoder">Reading PRU Encoder</a></h4>
<div class="sect4">
<h5 id="_problem_5"><a class="link" href="#_problem_5">Problem</a></h5>
<div class="paragraph">
<p>I want to access the PRU encoder.</p>
</div>
</div>
<div class="sect4">
<h5 id="_solution_5"><a class="link" href="#_solution_5">Solution</a></h5>
<div class="paragraph">
<p>The forth encoder is implemented on the PRU and accessed with <code>sudo rc_test_encoders_pru</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This command
needs root permission, so the <code>sudo</code> is needed.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here&#8217;s what you will see</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>sudo rc_test_encoders_pru</strong>
[sudo] password for debian:

Raw encoder position
      E4   |
         0 |^C</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you aren&#8217;t running the Blue you will have to configure the pins as shown
in the note above.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_beaglelogic_a_14_channel_logic_analyzer"><a class="link" href="#_beaglelogic_a_14_channel_logic_analyzer">1.2. BeagleLogic - a 14-channel Logic Analyzer</a></h3>
<div class="sect3">
<h4 id="_problem_6"><a class="link" href="#_problem_6">Problem</a></h4>
<div class="paragraph">
<p>I need a 100Msps, 14-channel logic analyzer</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_6"><a class="link" href="#_solution_6">Solution</a></h4>
<div class="paragraph">
<p><a href="https://beaglelogic.readthedocs.io/en/latest/">BeagleLogic</a> is a 100Msps,
14-channel logic analyzer that runs on the Beagle.</p>
</div>
<div class="verseblock">
<pre class="content">BeagleLogic turns your BeagleBone [Black] into a 14-channel, 100Msps Logic Analyzer. Once loaded, it presents itself as a character device node <strong>/dev/beaglelogic</strong>.

The core of the logic analyzer is the 'beaglelogic' kernel module that reserves memory for and drives the two Programmable Real-Time Units (PRU) via the remoteproc interface wherein the PRU directly writes logic samples to the System Memory (DDR RAM) at the configured sample rate one-shot or continuously without intervention from the ARM core.</pre>
<div class="attribution">
&#8212; https://github.com/abhishek-kakkar/BeagleLogic/wiki
</div>
</div>
<div class="paragraph">
<p>The quickest solution is to get the <a href="https://github.com/abhishek-kakkar/BeagleLogic/wiki/BeagleLogic-%22no-setup-required%22-setup:-Introducing-System-Image!">no-setup-required image</a>.  It points to an older image
(beaglelogic-stretch-2017-07-13-4gb.img.xz ) but should still work.</p>
</div>
<div class="paragraph">
<p>If you want to be running a newer image, there are instructions on the site for <a href="https://beaglelogic.readthedocs.io/en/latest/install.html">installing BeagleLogic</a>, but I had to do the additional steps in <a href="#case_installing_beaglelogic">Installing BeagleLogic</a>.</p>
</div>
<div id="case_installing_beaglelogic" class="listingblock">
<div class="title">Installing BeagleLogic</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="linenums">bone$ <strong>git clone https://github.com/abhishek-kakkar/BeagleLogic</strong>
bone$ <strong>cd BeagleLogic/kernel</strong>
bone$ <strong>mv beaglelogic-00A0.dts beaglelogic-00A0.dts.orig</strong>
bone$ <strong>wget https://gist.githubusercontent.com/abhishek-kakkar/0761ef7b10822cff4b3efd194837f49c/raw/eb2cf6cfb59ff5ccb1710dcd7d4a40cc01cfc050/beaglelogic-00A0.dts</strong>
bone$ <strong>make overlay</strong>
bone$ <strong>sudo cp beaglelogic-00A0.dtbo /lib/firmware/</strong>
bone$ <strong>sudo update-initramfs -u -k `uname -r`</strong>
bone$ <strong>sudo reboot</strong></code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the Bone has rebooted, browse to 192.168.7.2:4000 where you&#8217;ll see
<a href="#case_beaglelogic_capture">BeagleLogic Data Capture</a>.  Here you can easily select the sample
rate, number of samples, and which pins to sample.
Then click <strong>Begin Capture</strong> to capture your data, at up to 100 MHz!</p>
</div>
<div id="case_beaglelogic_capture" class="imageblock">
<div class="content">
<img src="figures/beaglelogic_capture.png" alt="BeagleLogic Data Capture">
</div>
<div class="title">Figure 1. BeagleLogic Data Capture</div>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_2"><a class="link" href="#_discussion_2">Discussion</a></h4>
<div class="paragraph">
<p>BeagleLogic is a complete system that includes firmware for the PRUs,
a kernel module and a web interface that create a powerful 100 MHz
logic analyzer on the Bone with no additional hardware needed.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you need buffered inputs, consider
<a href="http://standalone.beaglelogic.net/en/latest/">BeagleLogic Standalone</a>,
a turnkey Logic Analyzer built on top of BeagleLogic.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The kernel interface makes it easy to control the PRUs through the
command line.  For example</p>
</div>
<div class="listingblock">
<div class="content">
<pre>bone$ <strong>dd if=/dev/beaglelogic of=mydump bs=1M count=1</strong></pre>
</div>
</div>
<div class="paragraph">
<p>will capture a binary dump from the PRUs. The sample rate and number of
bits per sample can be controlled through <code>/sys/</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>bone$ <strong>cd /sys/devices/virtual/misc/beaglelogic</strong>
bone$ <strong>ls</strong>
buffers      filltestpattern  power       state         uevent
bufunitsize  lasterror        samplerate  subsystem
dev          memalloc         sampleunit  triggerflags
bone$ <strong>cat samplerate</strong>
1000
bone$ <strong>cat sampleunit</strong>
8bit</pre>
</div>
</div>
<div class="paragraph">
<p>You can set the sample rate by simply writing to <code>samplerate</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>bone$ <strong>echo 100000000 &gt; samplerate</strong></pre>
</div>
</div>
<div class="paragraph">
<p><a href="https://beaglelogic.readthedocs.io/en/latest/sysfs_attributes.html">sysfs attributes Reference</a>
has more details on configuring via sysfs.</p>
</div>
<div class="paragraph">
<p>If you run <code>dmesg -Hw</code> in another window you can see when a capture
is started and stopped.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>bone$ <strong>dmesg -Hw</strong>
[Jul25 08:46] misc beaglelogic: capture started with sample rate=100000000 Hz, sampleunit=1, triggerflags=0
[  +0.086261] misc beaglelogic: capture session ended</pre>
</div>
</div>
<div class="paragraph">
<p>BeagleLogic uses the two PRUs to sample at 100Msps.  Getting a PRU running at 200Hz to sample at 100Msps is a slick trick.
<a href="http://theembeddedkitchen.net/beaglelogic-building-a-logic-analyzer-with-the-prus-part-1/449">The Embedded Kitchen</a> has a nice article
explaining how the PRUs get this type of performance.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_neopixels_5050_rgb_leds_with_integrated_drivers_falcon_christmas"><a class="link" href="#_neopixels_5050_rgb_leds_with_integrated_drivers_falcon_christmas">1.3. NeoPixels - 5050 RGB LEDs with Integrated Drivers (Falcon Christmas)</a></h3>
<div class="sect3">
<h4 id="_problem_7"><a class="link" href="#_problem_7">Problem</a></h4>
<div class="paragraph">
<p>




You have an <a href="http://www.adafruit.com/products/1138">Adafruit NeoPixel LED string</a>,
<a href="http://www.adafruit.com/products/1487">Adafruit NeoPixel LED matrix</a> or
any other type of
<a href="https://cdn-shop.adafruit.com/datasheets/WS2812.pdf">WS2812 LED</a>
and want to light it up.</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_7"><a class="link" href="#_solution_7">Solution</a></h4>
<div class="paragraph">
<p>You can either write your own code
(See <a href="../05blocks/blocks.html#blocks_ws2812">WS2812 Driver</a>), or
use Falcon Christmas (FPP). FPP can be used to drive both LEDs with an integrated
driver (neopixels) or without an integrated driver.  Here we&#8217;ll show you how to
set up for the integrated drive and in the next section the no driver LEDs will be
show.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="case_rgb_matrix"><a class="link" href="#case_rgb_matrix">1.4. RGB LED Matrix - No Integrated Drivers (Falcon Christmas)</a></h3>
<div class="sect3">
<h4 id="_problem_8"><a class="link" href="#_problem_8">Problem</a></h4>
<div class="paragraph">
<p>You want to use a RGB LED Matrix display that doesn&#8217;t have integrated
drivers such as the
<a href="https://www.adafruit.com/product/2277">64x32 RGB LED Matrix</a> by Adafuit
shown in <a href="#case_adfruit_matrix">Adafruit LED Matrix</a>.</p>
</div>
<div id="case_adfruit_matrix" class="imageblock">
<div class="content">
<img src="figures/ledmatrix.jpg" alt="Adafruit LED Matrix">
</div>
<div class="title">Figure 2. Adafruit LED Matrix</div>
</div>
</div>
<div class="sect3">
<h4 id="_solution_8"><a class="link" href="#_solution_8">Solution</a></h4>
<div class="paragraph">
<p><a href="http://falconchristmas.com">Falcon Christmas</a> makes a software package
called
<a href="http://falconchristmas.com/forum/index.php/board,8.0.html">Falcon Player</a> (FPP) which can drive
such displays.</p>
</div>
<div class="verseblock">
<pre class="content">The Falcon Player (FPP) is a lightweight, optimized, feature-rich sequence player
designed to run on low-cost SBC&#8217;s (Single Board Computers).
FPP is a software solution that you download and install on hardware which can be
purchased from numerous sources around the internet.
FPP aims to be controller agnostic, it can talk E1.31, DMX, Pixelnet, and
Renard to hardware from multiple hardware vendors, including controller
hardware from Falcon Christmas available via COOPs or in the store on FalconChristmas.com.</pre>
<div class="attribution">
&#8212; http://www.falconchristmas.com/wiki/FPP:FAQ#What_is_FPP.3F
</div>
</div>
<div class="sect4">
<h5 id="_hardware"><a class="link" href="#_hardware">Hardware</a></h5>
<div class="paragraph">
<p>The Beagle hardware can be either a BeagleBone Black with the
<a href="https://oshpark.com/shared_projects/7mSHNZcD">Octoscroller Cape</a>, or a
PocketBeagle with the
<a href="https://www.hackster.io/daniel-kulp/pocketscroller-led-panel-cape-for-pocketbeagle-fe12a6">PocketScroller LED Panel Cape</a>.
(See <a href="https://kulplights.com/product/pocketscroller/">to purchase</a>.)
<a href="https://www.diychristmas.org/wiki/index.php?title=Building_an_Octoscroller_Matrix_Display">Building and Octoscroller Matrix Display</a>
gives details for using the BeagleBone Black.</p>
</div>
<div class="paragraph">
<p><a href="#case_pocket">Pocket Beagle Driving a P5 RGB LED Matrix via the PocketScroller Cape</a> shows how to attach the PocketBeagle to the P5 LED matrix
and where to attach the 5V power.  If you are going to turn on all the LEDs
to full white at the same time you will need at least a 4A supply.</p>
</div>
<div id="case_pocket" class="imageblock">
<div class="content">
<img src="figures/pocketscroller.jpg" alt="Pocket Beagle Driving a P5 RGB LED Matrix via the PocketScroller Cape">
</div>
<div class="title">Figure 3. Pocket Beagle Driving a P5 RGB LED Matrix via the PocketScroller Cape</div>
</div>
</div>
<div class="sect4">
<h5 id="_software"><a class="link" href="#_software">Software</a></h5>
<div class="paragraph">
<p>The FPP software is most easily installed by downloading the
<a href="https://github.com/FalconChristmas/fpp/releases/">current FPP release</a>, flashing an SD card and
booting from it.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>The really brave can install it on a already running image.  See details at
<a href="https://github.com/FalconChristmas/fpp/blob/master/SD/FPP_Install.sh" class="bare">https://github.com/FalconChristmas/fpp/blob/master/SD/FPP_Install.sh</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Assuming the PocketBeagle is attached via the USB cable,
on your host computer browse to <a href="http://192.168.7.2/" class="bare">http://192.168.7.2/</a> and you will see
<a href="#case_fpp_program_control">Falcon Play Program Control</a>.</p>
</div>
<div id="case_fpp_program_control" class="imageblock">
<div class="content">
<img src="figures/fpp_program_control.png" alt="Falcon Play Program Control">
</div>
<div class="title">Figure 4. Falcon Play Program Control</div>
</div>
<div class="paragraph">
<p>You can test the display by first setting up the Channel Outputs and then
going to <strong>Display Testing</strong>.  <a href="#case_channel_outputs_menu">Selecting Channel Outputs</a> shows where to
select Channel Outputs and <a href="#case_channel_outputs">Channel Outputs Settings</a> shows which settings to use.</p>
</div>
<div id="case_channel_outputs_menu" class="imageblock">
<div class="content">
<img src="figures/fpp_channel_outputs_menu.png" alt="Selecting Channel Outputs">
</div>
<div class="title">Figure 5. Selecting Channel Outputs</div>
</div>
<div id="case_channel_outputs" class="imageblock">
<div class="content">
<img src="figures/fpp_channel_outputs.png" alt="Channel Outputs Settings">
</div>
<div class="title">Figure 6. Channel Outputs Settings</div>
</div>
<div class="paragraph">
<p>Click on the <strong>LED Panels</strong> tab and then the only changes I made was
to select the <strong>Single Panel Size</strong> to be
<strong>64x32</strong> and to check the <strong>Enable LED Panel Output</strong>.</p>
</div>
<div class="paragraph">
<p>Next we need to test the display.  Select <strong>Display Testing</strong> shown in
<a href="#case_display_testing_menu">Selecting Display Testing</a>.</p>
</div>
<div id="case_display_testing_menu" class="imageblock">
<div class="content">
<img src="figures/fpp_display_testing_menu.png" alt="Selecting Display Testing">
</div>
<div class="title">Figure 7. Selecting Display Testing</div>
</div>
<div class="paragraph">
<p>Set the <strong>End Channel</strong> to <strong>6144</strong>. (6144 is 3*64*32)
Click <strong>Enable Test Mode</strong> and your matrix should light up.  Try the different
testing patterns shown in <a href="#case_display_testing">Display Testing Options</a>.</p>
</div>
<div id="case_display_testing" class="imageblock">
<div class="content">
<img src="figures/fpp_display_testing.png" alt="Display Testing Options">
</div>
<div class="title">Figure 8. Display Testing Options</div>
</div>
</div>
<div class="sect4">
<h5 id="_xlights_creating_content_for_the_display"><a class="link" href="#_xlights_creating_content_for_the_display">xLights - Creating Content for the Display</a></h5>
<div class="paragraph">
<p>Once you are sure your LED Matrix is working correctly you can program it
with a sequence.</p>
</div>
<div class="verseblock">
<pre class="content">xLights is a free and open source program that enables you to design, create and play amazing lighting displays through the use of DMX controllers, E1.31 Ethernet controllers and more.

With it you can layout your display visually then assign effects to the various items throughout your sequence. This can be in time to music (with beat-tracking built into xLights) or just however you like.
xLights runs on Windows, OSX and Linux</pre>
<div class="attribution">
&#8212; https://xlights.org/
</div>
</div>
<div class="paragraph">
<p>xLights can be installed on your host computer (not the Beagle) by
following instructions at <a href="https://xlights.org/releases/" class="bare">https://xlights.org/releases/</a>.</p>
</div>
<div class="paragraph">
<p>Run xLights and you&#8217;ll see <a href="#case_xlights_setup">xLights Setup</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>host$ <strong>chmod +x xLights-2021.18-x86_64.AppImage</strong>
host$ <strong>./xLights-2021.18-x86_64.AppImage</strong></code></pre>
</div>
</div>
<div id="case_xlights_setup" class="imageblock">
<div class="content">
<img src="figures/xlights_setup.png" alt="xLights Setup">
</div>
<div class="title">Figure 9. xLights Setup</div>
</div>
<div class="paragraph">
<p>We&#8217;ll walk you through a simple setup to get an animation to display on the
RGB Matrix.  xLights can use a protocol called E1.31 to send information to
the display.  Setup xLights by clicking on <strong>Add Ethernet</strong> and entering the values
shown in <a href="#case_xlights_setup_e1_31">Setting Up E1.31</a>.</p>
</div>
<div id="case_xlights_setup_e1_31" class="imageblock">
<div class="content">
<img src="figures/xlights_setup_e1_31.png" alt="Setting Up E1.31">
</div>
<div class="title">Figure 10. Setting Up E1.31</div>
</div>
<div class="paragraph">
<p>The <strong>IP Address</strong> is the Bone&#8217;s address as seen from the host computer.
Each LED is one channel, so one RGB LED is three channels.  The P5 board
has 3*64*32 or 6144 channels.  These are grouped into universes of 512
channels each.  This gives 6144/512 = 12 universes. See the
<a href="https://www.doityourselfchristmas.com/wiki/index.php?title=E1.31_(Streaming-ACN)_Protocol#Configuring_Sequencing_Software_to_use_E1.31_Output">E.13 documentation</a>
for more details.</p>
</div>
<div class="paragraph">
<p>Your setup should look like <a href="#case_xlights_setup_done">xLights setup for P5 display</a>.  Click the
<strong>Save Setup</strong> button to save.</p>
</div>
<div id="case_xlights_setup_done" class="imageblock">
<div class="content">
<img src="figures/xlights_setup_done.png" alt="xLights setup for P5 display">
</div>
<div class="title">Figure 11. xLights setup for P5 display</div>
</div>
<div class="paragraph">
<p>Next click on the <strong>Layout</strong> tab.  Click on the <strong>Matrix</strong> button as shown in
<a href="#case_xlights_matrix">Setting up the Matrix Layout</a>, then click on the black area where you want your
matrix to appear.</p>
</div>
<div id="case_xlights_matrix" class="imageblock">
<div class="content">
<img src="figures/xlights_layout.png" alt="Setting up the Matrix Layout">
</div>
<div class="title">Figure 12. Setting up the Matrix Layout</div>
</div>
<div class="paragraph">
<p><a href="#case_xlights_layout_details">Layout details for P5 matrix</a> shows the setting to use for the P5 matrix.</p>
</div>
<div id="case_xlights_layout_details" class="imageblock">
<div class="content">
<img src="figures/xlights_layout_details.png" alt="Layout details for P5 matrix">
</div>
<div class="title">Figure 13. Layout details for P5 matrix</div>
</div>
<div class="paragraph">
<p>All I changed was <strong># Strings</strong>, <strong>Nodes/String</strong>, <strong>Starting Location</strong> and most
importantly, expand <strong>String Properties</strong> and select at <strong>String Type</strong> of
<strong>RGB Nodes</strong>.  Above the setting you should see that <strong>Start Chan</strong> is 1 and
the <strong>End Chan</strong> is 6144, which is the total number of individual LEDs (3*63*32).
xLights now knows we are working with a P5 matrix, now on to the sequencer.</p>
</div>
<div class="paragraph">
<p>Now click on the <strong>Sequencer</strong> tab and then click on the <strong>New Sequence</strong> button
(<a href="#case_seq_new">Starting a new sequence</a>).</p>
</div>
<div id="case_seq_new" class="imageblock">
<div class="content">
<img src="figures/xlights_seq_new.png" alt="Starting a new sequence">
</div>
<div class="title">Figure 14. Starting a new sequence</div>
</div>
<div class="paragraph">
<p>Then click on <strong>Animation</strong>, <strong>20fps (50ms)</strong>, and <strong>Quick Start</strong>. Learning how to
do sequences is beyond the scope of this cookbook, however I&#8217;ll shown you how
do simple sequence just to be sure xLights is talking to the Bone.</p>
</div>
</div>
<div class="sect4">
<h5 id="_setting_up_e1_31_on_the_bone"><a class="link" href="#_setting_up_e1_31_on_the_bone">Setting Up E1.31 on the Bone</a></h5>
<div class="paragraph">
<p>First we need to setup FPP to take input from xLights.  Do this by going to
the <strong>Input/Output Setup</strong> menu and selecting <strong>Channel Inputs</strong>.  Then
enter <strong>12</strong> for <strong>Universe Count</strong> and click <strong>set</strong> and you will see
<a href="#case_inputs_setup">E1.31 Inputs</a>.</p>
</div>
<div id="case_inputs_setup" class="imageblock">
<div class="content">
<img src="figures/fpp_inputs_setup.png" alt=".E1.31 Inputs">
</div>
<div class="title">Figure 15. E1.31 Inputs</div>
</div>
<div class="paragraph">
<p>Click on the <strong>Save</strong> button above the table.</p>
</div>
<div class="paragraph">
<p>Then go to the <strong>Status/Control</strong> menu and select <strong>Status Page</strong>.</p>
</div>
<div id="case_mode_bridge" class="imageblock">
<div class="content">
<img src="figures/fpp_mode_bridge.png" alt="Bridge Mode">
</div>
<div class="title">Figure 16. Bridge Mode</div>
</div>
</div>
<div class="sect4">
<h5 id="_testing_the_xlights_connection"><a class="link" href="#_testing_the_xlights_connection">Testing the xLights Connection</a></h5>
<div class="paragraph">
<p>The Bone is now listening for commands from xLights via the E1.31 protocol.
A quick way to verify everything is t o return to xLights and go to the
<strong>Tools</strong> menu and select <strong>Test</strong> (<a href="#case_xlights_test">xLights test page</a>).</p>
</div>
<div id="case_xlights_test" class="imageblock">
<div class="content">
<img src="figures/xlights_test.png" alt="xLights test page">
</div>
<div class="title">Figure 17. xLights test page</div>
</div>
<div class="paragraph">
<p>Click the box under <strong>Select channels&#8230;&#8203;</strong>, click <strong>Output to lights</strong> and
select <strong>Twinkle 50%</strong>.  You matrix should have a colorful twinkle pattern
(<a href="#case_xlights_twinkle">xLights Twinkle test pattern</a>).</p>
</div>
<div id="case_xlights_twinkle" class="imageblock">
<div class="content">
<img src="figures/xlights_twinkle.jpg" alt="xLights Twinkle test pattern">
</div>
<div class="title">Figure 18. xLights Twinkle test pattern</div>
</div>
</div>
<div class="sect4">
<h5 id="_a_simple_xlights_sequence"><a class="link" href="#_a_simple_xlights_sequence">A Simple xLights Sequence</a></h5>
<div class="paragraph">
<p>Now that the xLights to FPP link is tested you can generate a sequence to
play.  Close the Test window and click on the <strong>Sequencer</strong> tab.  Then drag
an effect from the <strong>Effects</strong> box to the timeline that below it.  Drop it to
the right of the <strong>Matrix</strong> label (<a href="#case_seq_drag">Drag an effect to the timeline</a>).  The click
<strong>Output To Lights</strong> which is the yellow lightbulb to the right on the top
toolbar.  Your matrix should now be displaying your effect.</p>
</div>
<div id="case_seq_drag" class="paragraph">
<div class="title">Drag an effect to the timeline</div>
<p><span class="image"><img src="figures/xlights_seq_drag.png" alt="Drag an effect to the timeline"></span></p>
</div>
<div class="paragraph">
<p>The setup requires the host computer to send the animation data to the Bone.
The next section shows how to save the sequence and play it on the Bone
standalone.</p>
</div>
</div>
<div class="sect4">
<h5 id="_saving_a_sequence_and_playing_it_standalone"><a class="link" href="#_saving_a_sequence_and_playing_it_standalone">Saving a Sequence and Playing it Standalone</a></h5>
<div class="paragraph">
<p>In xLights save your sequence by hitting Ctrl-S and giving it a name.  I called
mine <strong>fire</strong> since I used a fire effect.  Now, switch back to FPP and select
the <strong>Content Setup</strong> menu and select <strong>File Manager</strong>.  Click the black
<strong>Select Files</strong> button and select your sequence file that ends in <strong>.fseq</strong>
(<a href="#case_file_manager">FPP file manager</a>).</p>
</div>
<div id="case_file_manager" class="paragraph">
<div class="title">FPP file manager</div>
<p><span class="image"><img src="figures/fpp_file_manager.png" alt="FPP file manager"></span></p>
</div>
<div class="paragraph">
<p>Once your sequence is uploaded, got to <strong>Content Steup</strong> and select <strong>Playlists</strong>.
Enter you playlist name (I used <strong>fire</strong>) and click <strong>Add</strong>.  Then click
<strong>Add a Sequence/Entry</strong> and select <strong>Sequence Only</strong>
(<a href="#case_playlist">Adding a new playlist to FPP</a>), then click <strong>Add</strong>.</p>
</div>
<div id="case_playlist" class="imageblock">
<div class="content">
<img src="figures/fpp_playlist.png" alt="Adding a new playlist to FPP">
</div>
<div class="title">Figure 19. Adding a new playlist to FPP</div>
</div>
<div class="paragraph">
<p>Be sure to click <strong>Save Playlist</strong> on the right. Now return to
<strong>Status/Control</strong> and <strong>Status Page</strong> and make sure <strong>FPPD Mode:</strong> is set
to <strong>Standalone</strong>.  You should see your playlist.  Click the <strong>Play</strong>
button and your sequence will play.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figures/fpp_playlist_status.png" alt="Playing a playlist">
</div>
<div class="title">Figure 20. Adding a new playlist to FPP</div>
</div>
<div class="paragraph">
<p>The beauty of the PRU is that the Beagle can play a detailed sequence at
20 frames per second and the ARM procossor is only 15% used.  The PRUs
are doing all the work.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_machinekit"><a class="link" href="#_machinekit">1.5. MachineKit</a></h3>
<div class="paragraph">
<p><a href="http://www.machinekit.io/">MachineKit</a> is a platform for machine control
applications.  It can control
machine tools, robots, or other automated devices. It can control servo
motors, stepper motors, relays, and other devices related to machine tools.</p>
</div>
<div class="verseblock">
<pre class="content">Machinekit is portable across a wide range of hardware platforms and real-time environments, and delivers excellent performance at low cost. It is based on the HAL component architecture, an intuitive and easy to use circuit model that includes over 150 building blocks for digital logic, motion, control loops, signal processing, and hardware drivers. Machinekit supports local and networked UI options, including ubiquitous platforms like phones or tablets.</pre>
<div class="attribution">
&#8212; http://www.machinekit.io/about/
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ardupilot"><a class="link" href="#_ardupilot">1.6. ArduPilot</a></h3>
<div class="paragraph">
<p><a href="http://ardupilot.org/">ArduPilot</a> is a open source autopilot system supporting multi-copters, traditional helicopters, fixed wing aircraft and rovers.
ArduPilot runs on a many
<a href="http://ardupilot.org/copter/docs/common-autopilots.html">hardware platforms</a>
including the
<a href="http://ardupilot.org/dev/docs/building-for-beaglebone-black-on-linux.html#building-for-beaglebone-black-on-linux">BeagleBone Black</a> and the
<a href="http://ardupilot.org/copter/docs/common-beagle-bone-blue.html">BeagleBone Blue</a>.</p>
</div>
<div class="verseblock">
<pre class="content">Ardupilot is the most advanced, full-featured and reliable open source autopilot software available. It has been developed over 5+ years by a team of diverse professional engineers and computer scientists. It is the only autopilot software capable of controlling any vehicle system imaginable, from conventional airplanes, multirotors, and helicopters, to boats and even submarines. And now being expanded to feature support for new emerging vehicle types such as quad-planes and compound helicopters.
Installed in over 1,000,000 vehicles world-wide, and with its advanced data-logging, analysis and simulation tools, Ardupilot is the most tested and proven autopilot software. The open-source code base means that it is rapidly evolving, always at the cutting edge of technology development. With many peripheral suppliers creating interfaces, users benefit from a broad ecosystem of sensors, companion computers and communication systems. Finally, since the source code is open, it can be audited to ensure compliance with security and secrecy requirements.

The software suite is installed in aircraft from many OEM UAV companies, such as 3DR, jDrones, PrecisionHawk, AgEagle and Kespry. It is also used for testing and development by several large institutions and corporations such as NASA, Intel and Insitu/Boeing, as well as countless colleges and universities around the world.</pre>
<div class="attribution">
&#8212; http://www.machinekit.io/about/
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Four if you are on the BeagleBone AI
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-08-16 15:05:42 -0400
</div>
</div>
</body>
</html>