<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Running a Program; Configuring Pins</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_running_a_program_configuring_pins">1. Running a Program; Configuring Pins</a>
<ul class="sectlevel2">
<li><a href="#_getting_example_code">1.1. Getting Example Code</a></li>
<li><a href="#_compiling_and_running">1.2. Compiling and Running</a></li>
<li><a href="#_stopping_and_starting_the_pru">1.3. Stopping and Starting the PRU</a></li>
<li><a href="#details_makefile">1.4. The Standard Makefile</a></li>
<li><a href="#_compiling_with_clpru_and_lnkpru">1.5. Compiling with clpru and lnkpru</a></li>
<li><a href="#detail_linker">1.6. The Linker Command File - am335x_pru.cmd</a></li>
<li><a href="#_loading_firmware">1.7. Loading Firmware</a></li>
<li><a href="#details_configure_servos">1.8. Configuring Pins for Controlling Servos</a></li>
<li><a href="#details_configure_encoders">1.9. Configuring Pins for Controlling Encoders</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="paragraph">
<p><a href="../index.html">Outline</a></p>
</div>
<div class="sect1">
<h2 id="_running_a_program_configuring_pins"><a class="link" href="#_running_a_program_configuring_pins">1. Running a Program; Configuring Pins</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are a lot of details in compiling and running PRU code.
Fortunately those details are captured in a common <code>Makefile</code> that is
used througout this book.  This chapter shows how to use the <code>Makefile</code> to
compile code and also start and stop the PRUs.</p>
</div>
<div class="paragraph">
<p>The following are resources used in this chapter.</p>
</div>
<div class="ulist">
<div class="title">Resources</div>
<ul>
<li>
<p><a href="http://software-dl.ti.com/codegen/esd/cgt_public_sw/PRU/2.1.5/ti_cgt_pru_2.1.5_armlinuxa8hf_busybox_installer.sh">PRU Code Generation Tools - Compiler</a></p>
</li>
<li>
<p><a href="http://git.ti.com/pru-software-support-package">PRU Software Support Package</a></p>
</li>
<li>
<p><a href="http://www.ti.com/lit/ug/spruhv7b/spruhv7b.pdf">PRU Optimizing C/C++ Compiler</a></p>
</li>
<li>
<p><a href="http://www.ti.com/lit/ug/spruhv6b/spruhv6b.pdf">PRU Assembly Language Tools</a></p>
</li>
<li>
<p><a href="http://www.ti.com/lit/pdf/spruhz6l">AM572x Technical Reference Manual</a> (AI)</p>
</li>
<li>
<p><a href="http://www.ti.com/lit/pdf/spruh73">AM335x Technical Reference Manual</a> (All others)</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_getting_example_code"><a class="link" href="#_getting_example_code">1.1. Getting Example Code</a></h3>
<div class="sect3">
<h4 id="_problem"><a class="link" href="#_problem">Problem</a></h4>
<div class="paragraph">
<p>I want to get the files used in this book.</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution"><a class="link" href="#_solution">Solution</a></h4>
<div class="paragraph">
<p>It&#8217;s all on a GitHub repository.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>git clone https://github.com/MarkAYoder/PRUCookbook.git</strong></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compiling_and_running"><a class="link" href="#_compiling_and_running">1.2. Compiling and Running</a></h3>
<div class="sect3">
<h4 id="_problem_2"><a class="link" href="#_problem_2">Problem</a></h4>
<div class="paragraph">
<p>I want to compile and run an example.</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_2"><a class="link" href="#_solution_2">Solution</a></h4>
<div class="paragraph">
<p>Change to the directory of the code you want to run.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>cd PRUCookbook/docs/06io/code</strong>
bone$ <strong>ls</strong>
gpio.pru0.c  Makefile  setup.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Source the setup file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>source setup.sh</strong>
TARGET=gpio.pru0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you are ready to compile and run.  This is automated for you in the Makefile</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>make</strong>
/var/lib/cloud9/common/Makefile:28: MODEL=TI_AM335x_BeagleBone_Black,TARGET=gpio.pru0,COMMON=/var/lib/cloud9/common
/var/lib/cloud9/common/Makefile:147: GEN_DIR=/tmp/cloud9-examples,CHIP=am335x,PROC=pru,PRUN=0,PRU_DIR=/sys/class/remoteproc/remoteproc1,EXE=.out
-    Stopping PRU 0
/bin/sh: 1: echo: echo: I/O error
Cannot stop 0
CC  gpio.pru0.c
&quot;/var/lib/cloud9/common/prugpio.h&quot;, line 53: warning #1181-D: #warning directive: &quot;Found am335x&quot;
LD  /tmp/cloud9-examples/gpio.pru0.o
-   copying firmware file /tmp/cloud9-examples/gpio.pru0.out to /lib/firmware/am335x-pru0-fw
write_init_pins.sh
writing &quot;out&quot; to &quot;/sys/class/gpio/gpio30/direction&quot;
-    Starting PRU 0
MODEL   = TI_AM335x_BeagleBone_Black
PROC    = pru
PRUN    = 0
PRU_DIR = /sys/class/remoteproc/remoteproc1
rm /tmp/cloud9-examples/gpio.pru0.o</code></pre>
</div>
</div>
<div class="paragraph">
<p>Congratulations, your are now running a PRU.  If you have an LED attached to
<code>P9_11</code> it should be blinking.</p>
</div>
</div>
<div class="sect3">
<h4 id="_discussion"><a class="link" href="#_discussion">Discussion</a></h4>
<div class="paragraph">
<p>The <code>setup.sh</code> file sets the <code>TARGET</code> to the file you want to compile.
Set it to the filename, without the <code>.c</code> extension (<code>gpio.pru0</code>).
The file extension <code>.pru0</code> specifies the number of the PRU you are using
(either <code>1_0</code>, <code>1_1</code>, <code>2_0</code>, <code>2_1</code> on the AI or <code>0</code> or <code>1</code> on the others)</p>
</div>
<div class="paragraph">
<p>You can override the <code>TARGET</code> on the command line.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>bone$ <strong>cp gpio.pru0.c gpio.pru1.c</strong>
bone$ <strong>export TARGET=gpio.pru1</strong></pre>
</div>
</div>
<div class="paragraph">
<p>Notice the <code>TARGET</code> doesn&#8217;t have the <code>.c</code> on the end.</p>
</div>
<div class="paragraph">
<p>You can also specify them when running <code>make</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>bone$ <strong>cp gpio.pru0.c gpio.pru1.c</strong>
bone$ <strong>make TARGET=gpio.pru1</strong></pre>
</div>
</div>
<div class="paragraph">
<p>The setup file also contains instructions to figure out which Beagle you are running
and then configure the pins acordingly.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>TODO - Fix config-pin</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">setup.sh</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="linenums">#!/bin/bash

export TARGET=gpio.pru0
echo TARGET=$TARGET

# Configure the PRU pins based on which Beagle is running
machine=$(awk '{print $NF}' /proc/device-tree/model)
echo -n $machine
if [ $machine = &quot;Black&quot; ]; then
    echo &quot; Found&quot;
    pins=&quot;P9_11&quot;
elif [ $machine = &quot;Blue&quot; ]; then
    echo &quot; Found&quot;
    pins=&quot;&quot;
elif [ $machine = &quot;PocketBeagle&quot; ]; then
    echo &quot; Found&quot;
    pins=&quot;P1_36&quot;
else
    echo &quot; Not Found&quot;
    pins=&quot;&quot;
fi

for pin in $pins
do
    echo $pin
    config-pin $pin out
    config-pin -q $pin
done</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Line</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2-5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set which PRU to use and which file to compile.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Figure out which type of Beagle we have.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10-22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Based on the type, set the <code>pins</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">24-29</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configure (set the pin mux) for each of the pins.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <code>Makefile</code> stops the PRU, compiles the file and moves it where it will
be loaded, and then restarts the PRU.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_stopping_and_starting_the_pru"><a class="link" href="#_stopping_and_starting_the_pru">1.3. Stopping and Starting the PRU</a></h3>
<div class="sect3">
<h4 id="_problem_3"><a class="link" href="#_problem_3">Problem</a></h4>
<div class="paragraph">
<p>I want to stop and start the PRU.</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_3"><a class="link" href="#_solution_3">Solution</a></h4>
<div class="paragraph">
<p>It&#8217;s easy.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>make stop</strong>
-    Stopping PRU 0
stop
bone$ <strong>make start</strong>
-    Starting PRU 0
start</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="../04debug/debug.html.html#_dmesg_hw">dmesg -Hw</a> to see how to tell if the PRU
is stopped.</p>
</div>
<div class="paragraph">
<p>This assumes <code>TARGET</code> is set to the PRU you are using.
If you want to control the other PRU use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>cp gpio.pru0.c gpio.pru1.c</strong>
bone$ <strong>make TARGET=gpio.pru1</strong>
bone$ <strong>make TARGET=gpio.pru1 stop</strong>
bone$ <strong>make TARGET=gpio.pru1 start</strong></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="details_makefile"><a class="link" href="#details_makefile">1.4. The Standard Makefile</a></h3>
<div class="ulist">
<ul>
<li>
<p>TODO - Make this into how to use the standard Makefile</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_problem_4"><a class="link" href="#_problem_4">Problem</a></h4>
<div class="paragraph">
<p>There are all sorts of options that need to be set when compiling
a program.  How can I be sure to get them all right?</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_4"><a class="link" href="#_solution_4">Solution</a></h4>
<div class="paragraph">
<p>The surest way to make sure everything is right is to use our
standard <code>Makefile</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_2"><a class="link" href="#_discussion_2">Discussion</a></h4>
<div class="paragraph">
<p>It&#8217;s assumed you already know how Makefiles work.  If not, there are
many resources online that can bring you up to speed.
Here is the stardard <code>Makefile</code> used throughout this book.</p>
</div>
<div class="listingblock">
<div class="title">Standard Makefile</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="makefile"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>include /var/lib/cloud9/common/Makefile</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s an highlevel overview of the Makefile</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Makefile Overview</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Line</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6,7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">You need to define <code>TARGET</code> and <code>PRU</code> before running the Makefile.
This is done in a <code>setup.sh</code>. <code>TARGET</code> is the name of the c source file, without
the <code>.c</code>.  <code>PRUN</code> is the number of the PRU for which you are compiling.
In our case it&#8217;s either 0 or 1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12,13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">These tell where to find the PRU compiler and the support libraries.
These files are already installed on the standard Beagle images.
If they aren&#8217;t installed you can find them at
<a href="http://software-dl.ti.com/codegen/esd/cgt_public_sw/PRU/2.1.5/ti_cgt_pru_2.1.5_armlinuxa8hf_busybox_installer.sh">PRU Code Generation Tools - Compiler</a> and
<a href="http://git.ti.com/pru-software-support-package">PRU Software Support Package</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is where all the generated files are stored. <code>/tmp</code> is used since
these files aren&#8217;t needed once the PRU is running. Running <code>make clean</code> removes
these files for the given PRUN.  If you look in the directory you&#8217;ll find:<br>
<code>bone$ <strong>ls /tmp/pru0-gen/</strong><br>
file.map  gpio1.asm  gpio1.lst  gpio1.obj  gpio1.out  gpio1.pp</code><br>
<code>file.map</code> shows what addresses the symbols are mapped to and <code>.lst</code>
is the assembly code output by the compiler.  It might be useful to see
what your code is being compiled to.
The <code>.out</code> file is the generated code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This points to the file that tells the linker where in memory to
put things.  It will be covered in <a href="#detail_linker">The Linker Command File - am335x_pru.cmd</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">17,18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tells where to find the PRU libraries and include files.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">20,21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This gives the stack and heap sizes.
<code>STACK_SIZE</code> is the size of section <code>.stack</code> and
<code>HEAP_SIZE</code> is the size of the <code>.bss</code> section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">23,27</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flags for the c compiler and the linker</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">30-36</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Here we map the PRU number to its physical address. This is needed later
when loading the PRU. These addresses are fixed, no matter which Beagle you
are using.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">38</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This computes the path to the given PRU. If you look in this directory
you will find <code>state</code> and <code>firmware</code> (among other things).  <code>state</code> tells you
if the PRU is running or not.<br>
<code>bone$ <strong>cat state</strong></code><br>
<code>running</code><br>
<code>firmware</code> is the name of the file in
<code>/lib/firmware</code> to copy the <code>.out</code> file to that the PRU is to run.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">41</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Since this is the first rule, it&#8217;s the one that&#8217;s run what you enter
<code>make</code> without a target. So here we stop the PRU, install the code and then
start the PRU.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">43-45</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This rule stops the current PRU by writing the command <code>stop</code> into the
<code>state</code> file noted above.  It&#8217;s a bit complicated since you have to have
root permission to write to the file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">47-49</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This does a simular thing for starting the PRU.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">51-54</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The PRU code is installed by simply copying the generated <code>.out</code> file
to <code>/lib/firmware/am335x-pru<em>X</em>-fw</code> where <em>X</em> is either 0 or 1 depending
on the PRU being used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">56-64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rules for compiling and linking. Notice the <code>clpru</code> command has <code>-D=PRUN=$(PRUN)</code>.
This will define <code>PRUN</code> to equal the PRU number in the code being compiled. This
way the code can have conditional compilation based on which PRU it&#8217;s being
compiled for.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">66-68</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rule for removing the generated files.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Fortunately you shouldn&#8217;t have to modify the <code>Makefile</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_compiling_with_clpru_and_lnkpru"><a class="link" href="#_compiling_with_clpru_and_lnkpru">1.5. Compiling with clpru and lnkpru</a></h3>
<div class="sect3">
<h4 id="_problem_5"><a class="link" href="#_problem_5">Problem</a></h4>
<div class="paragraph">
<p>You need details on the c compiler, linker and other tools for the PRU.</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_5"><a class="link" href="#_solution_5">Solution</a></h4>
<div class="paragraph">
<p>The PRU compiler and linker are already installed on the standard images.
They are called <code>clpru</code> and <code>lnkpru</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>which clpru</strong>
/usr/bin/clpru</code></pre>
</div>
</div>
<div class="paragraph">
<p>Details on each can be found here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.ti.com/lit/ug/spruhv7b/spruhv7b.pdf">PRU Optimizing C/C++ Compiler</a></p>
</li>
<li>
<p><a href="http://www.ti.com/lit/ug/spruhv6b/spruhv6b.pdf">PRU Assembly Language Tools</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>IN fact there are PRU versions of many of the standard code generation tools.</p>
</div>
<div class="listingblock">
<div class="title">code tools</div>
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>ls /usr/bin/*pru</strong>
/usr/bin/abspru    /usr/bin/clistpru  /usr/bin/hexpru      /usr/bin/ofdpru
/usr/bin/acpiapru  /usr/bin/clpru     /usr/bin/ilkpru      /usr/bin/optpru
/usr/bin/arpru     /usr/bin/dempru    /usr/bin/libinfopru  /usr/bin/rc_test_encoders_pru
/usr/bin/asmpru    /usr/bin/dispru    /usr/bin/lnkpru      /usr/bin/strippru
/usr/bin/cgpru     /usr/bin/embedpru  /usr/bin/nmpru       /usr/bin/xrefpru</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="http://www.ti.com/lit/ug/spruhv6b/spruhv6b.pdf">PRU Assembly Language Tools</a> for more details.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="detail_linker"><a class="link" href="#detail_linker">1.6. The Linker Command File - am335x_pru.cmd</a></h3>
<div class="sect3">
<h4 id="_problem_6"><a class="link" href="#_problem_6">Problem</a></h4>
<div class="paragraph">
<p>The linker needs to be told where in memory to place the code and variables.</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_6"><a class="link" href="#_solution_6">Solution</a></h4>
<div class="paragraph">
<p><code>am335x_pru.cmd</code> is the standard linker command file that tells the linker
where to put what.</p>
</div>
<div class="listingblock">
<div class="title">am335x_pru.cmd</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="linker"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
</pre></td>
  <td class="code"><pre>/****************************************************************************/
/*  AM335x_PRU.cmd                                                          */
/*  Copyright (c) 2015  Texas Instruments Incorporated                      */
/*                                                                          */
/*    Description: This file is a linker command file that can be used for  */
/*                 linking PRU programs built with the C compiler and       */
/*                 the resulting .out file on an AM335x device.             */
/****************************************************************************/

-cr                             /* Link using C conventions */

/* Specify the System Memory Map */
MEMORY
{
      PAGE 0:
    PRU_IMEM        : org = 0x00000000 len = 0x00002000  /* 8kB PRU0 Instruction RAM */

      PAGE 1:

    /* RAM */

    PRU_DMEM_0_1    : org = 0x00000000 len = 0x00002000 CREGISTER=24 /* 8kB PRU Data RAM 0_1 */
    PRU_DMEM_1_0    : org = 0x00002000 len = 0x00002000 CREGISTER=25 /* 8kB PRU Data RAM 1_0 */

      PAGE 2:
    PRU_SHAREDMEM   : org = 0x00010000 len = 0x00003000 CREGISTER=28 /* 12kB Shared RAM */

    DDR             : org = 0x80000000 len = 0x00000100 CREGISTER=31
    L3OCMC          : org = 0x40000000 len = 0x00010000 CREGISTER=30


    /* Peripherals */

    PRU_CFG         : org = 0x00026000 len = 0x00000044 CREGISTER=4
    PRU_ECAP        : org = 0x00030000 len = 0x00000060 CREGISTER=3
    PRU_IEP         : org = 0x0002E000 len = 0x0000031C CREGISTER=26
    PRU_INTC        : org = 0x00020000 len = 0x00001504 CREGISTER=0
    PRU_UART        : org = 0x00028000 len = 0x00000038 CREGISTER=7

    DCAN0           : org = 0x481CC000 len = 0x000001E8 CREGISTER=14
    DCAN1           : org = 0x481D0000 len = 0x000001E8 CREGISTER=15
    DMTIMER2        : org = 0x48040000 len = 0x0000005C CREGISTER=1
    PWMSS0          : org = 0x48300000 len = 0x000002C4 CREGISTER=18
    PWMSS1          : org = 0x48302000 len = 0x000002C4 CREGISTER=19
    PWMSS2          : org = 0x48304000 len = 0x000002C4 CREGISTER=20
    GEMAC           : org = 0x4A100000 len = 0x0000128C CREGISTER=9
    I2C1            : org = 0x4802A000 len = 0x000000D8 CREGISTER=2
    I2C2            : org = 0x4819C000 len = 0x000000D8 CREGISTER=17
    MBX0            : org = 0x480C8000 len = 0x00000140 CREGISTER=22
    MCASP0_DMA      : org = 0x46000000 len = 0x00000100 CREGISTER=8
    MCSPI0          : org = 0x48030000 len = 0x000001A4 CREGISTER=6
    MCSPI1          : org = 0x481A0000 len = 0x000001A4 CREGISTER=16
    MMCHS0          : org = 0x48060000 len = 0x00000300 CREGISTER=5
    SPINLOCK        : org = 0x480CA000 len = 0x00000880 CREGISTER=23
    TPCC            : org = 0x49000000 len = 0x00001098 CREGISTER=29
    UART1           : org = 0x48022000 len = 0x00000088 CREGISTER=11
    UART2           : org = 0x48024000 len = 0x00000088 CREGISTER=12

    RSVD10          : org = 0x48318000 len = 0x00000100 CREGISTER=10
    RSVD13          : org = 0x48310000 len = 0x00000100 CREGISTER=13
    RSVD21          : org = 0x00032400 len = 0x00000100 CREGISTER=21
    RSVD27          : org = 0x00032000 len = 0x00000100 CREGISTER=27

}

/* Specify the sections allocation into memory */
SECTIONS {
    /* Forces _c_int00 to the start of PRU IRAM. Not necessary when loading
       an ELF file, but useful when loading a binary */
    .text:_c_int00* &gt;  0x0, PAGE 0

    .text       &gt;  PRU_IMEM, PAGE 0
    .stack      &gt;  PRU_DMEM_0_1, PAGE 1
    .bss        &gt;  PRU_DMEM_0_1, PAGE 1
    .cio        &gt;  PRU_DMEM_0_1, PAGE 1
    .data       &gt;  PRU_DMEM_0_1, PAGE 1
    .switch     &gt;  PRU_DMEM_0_1, PAGE 1
    .sysmem     &gt;  PRU_DMEM_0_1, PAGE 1
    .cinit      &gt;  PRU_DMEM_0_1, PAGE 1
    .rodata     &gt;  PRU_DMEM_0_1, PAGE 1
    .rofardata  &gt;  PRU_DMEM_0_1, PAGE 1
    .farbss     &gt;  PRU_DMEM_0_1, PAGE 1
    .fardata    &gt;  PRU_DMEM_0_1, PAGE 1

    .resource_table &gt; PRU_DMEM_0_1, PAGE 1
    .init_pins &gt; PRU_DMEM_0_1, PAGE 1
}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_3"><a class="link" href="#_discussion_3">Discussion</a></h4>
<div class="paragraph">
<p>The important things to notice in the file are given in the following table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. AM335x_PRU.cmd important things</caption>
<colgroup>
<col style="width: 10%;">
<col style="width: 90%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Line</th>
<th class="tableblock halign-left valign-top">Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is where the instructions are stored. See page 206 of the
<a href="https://www.ti.com/lit/ug/spruh73p/spruh73p.pdf">AM335x Technical Reference Manual</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is where PRU 0&#8217;s DMEM 0 is mapped.  It&#8217;s also where PRU 1&#8217;s
DMEM 1 is mapped.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">23</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The reverse to above.  PRU 0&#8217;s DMEM 1 appears here and PRU 1&#8217;s DMEM 0
is here.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">26</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The shared memory for both PRU&#8217;s appears here.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">72</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>.text</code> section is where the code goes.  It&#8217;s mapped to <code>IMEM</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">73</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The stack is then mapped to DMEM 0. Notice that DMEM 0 is one bank
of memory for PRU 0 and another for PRU1, so they both get their own stacks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">74</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>.bss</code> section is where the heap goes.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Why is it important to understand this file?  If you are going to store things
in DMEM, you need to be sure to start at address 0x0200 since the stack and
the heap are in the locations below 0x0200.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_loading_firmware"><a class="link" href="#_loading_firmware">1.7. Loading Firmware</a></h3>
<div class="sect3">
<h4 id="_problem_7"><a class="link" href="#_problem_7">Problem</a></h4>
<div class="paragraph">
<p>I have my PRU code all compiled and need to load it on the PRU.</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_7"><a class="link" href="#_solution_7">Solution</a></h4>
<div class="paragraph">
<p>It&#8217;s a simple three step process.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the PRU</p>
</li>
<li>
<p>Write the <code>.out</code> file to the right place in <code>/lib/firmware</code></p>
</li>
<li>
<p>Start the PRU.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This is all handled in the <a href="#details_makefile">The Standard Makefile</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_4"><a class="link" href="#_discussion_4">Discussion</a></h4>
<div class="ulist">
<ul>
<li>
<p>TODO - update for AI</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The PRUs appear in the Linux file space at
<code>/sys/devices/platform/ocp/4a32600*.pruss-soc-bus/4a300000.pruss</code>.</p>
</div>
<div class="listingblock">
<div class="title">Finding the PRUs</div>
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>cd /sys/devices/platform/ocp/4a326000.pruss-soc-bus/4a300000.pruss</strong>
bone$ <strong>ls</strong>
4a320000.intc  4a338000.<strong>pru1</strong>  driver_override  of_node  subsystem
4a334000.<strong>pru0</strong>  driver         modalias         power    uevent</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we see PRU 0 and PRU 1 in the path.  Let&#8217;s follow PRU 0.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>cd 4a334000.pru0/remoteproc/remoteproc1</strong>
bone$ <strong>ls</strong>
device  firmware  power  state  subsystem  uevent</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we see the files that control PRU 0.  <code>firmware</code> tells where in <code>/lib/firmware</code>
to look for the code to run on the PRU.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>bone$ <strong>cat firmware</strong>
am335x-pru0-fw</code></pre>
</div>
</div>
<div class="paragraph">
<p>Therefore you copy your <code>.out</code> file to <code>/lib/firmware/am335x-pru0-fw</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="details_configure_servos"><a class="link" href="#details_configure_servos">1.8. Configuring Pins for Controlling Servos</a></h3>
<div class="sect3">
<h4 id="_problem_8"><a class="link" href="#_problem_8">Problem</a></h4>
<div class="paragraph">
<p>You want to configure the pins so the PRU <em>outputs</em> are accessable.</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_8"><a class="link" href="#_solution_8">Solution</a></h4>
<div class="paragraph">
<p>It depends on which Beagle you are running on.  If you are on the Blue, everything is already configured for you.
If you are on the Black or Pocket you&#8217;ll need to run the following script.</p>
</div>
<div class="listingblock">
<div class="title">servos_setup.sh</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="linenums">#!/bin/bash
# Configure the PRU pins based on which Beagle is running
machine=$(awk '{print $NF}' /proc/device-tree/model)
echo -n $machine
if [ $machine = &quot;Black&quot; ]; then
    echo &quot; Found&quot;
    pins=&quot;P8_27 P8_28 P8_29 P8_30 P8_39 P8_40 P8_41 P8_42&quot;
elif [ $machine = &quot;Blue&quot; ]; then
    echo &quot; Found&quot;
    pins=&quot;&quot;
elif [ $machine = &quot;PocketBeagle&quot; ]; then
    echo &quot; Found&quot;
    pins=&quot;P2_35 P1_35 P1_02 P1_04&quot;
else
    echo &quot; Not Found&quot;
    pins=&quot;&quot;
fi

for pin in $pins
do
    echo $pin
    config-pin $pin pruout
    config-pin -q $pin
done</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_5"><a class="link" href="#_discussion_5">Discussion</a></h4>
<div class="paragraph">
<p>The first part of the code looks in <code>/proc/device-tree/model</code> to see which Beagle is running. Based on that it
assigns <code>pins</code> a list of pins to configure.  Then the last part of the script loops through each of the pins and configures it.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="details_configure_encoders"><a class="link" href="#details_configure_encoders">1.9. Configuring Pins for Controlling Encoders</a></h3>
<div class="sect3">
<h4 id="_problem_9"><a class="link" href="#_problem_9">Problem</a></h4>
<div class="paragraph">
<p>You want to configure the pins so the PRU <em>inputs</em> are accessable.</p>
</div>
</div>
<div class="sect3">
<h4 id="_solution_9"><a class="link" href="#_solution_9">Solution</a></h4>
<div class="paragraph">
<p>It depends on which Beagle you are running on.  If you are on the Blue, everything is already configured for you.
If you are on the Black or Pocket you&#8217;ll need to run the following script.</p>
</div>
<div class="listingblock">
<div class="title">encoder_setup.sh</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="linenums">#!/bin/bash
# Configure the pins based on which Beagle is running
machine=$(awk '{print $NF}' /proc/device-tree/model)
echo -n $machine

# Configure eQEP pins
if [ $machine = &quot;Black&quot; ]; then
    echo &quot; Found&quot;
    pins=&quot;P9_92 P9_27 P8_35 P8_33 P8_12 P8_11 P8_41 P8_42&quot;
elif [ $machine = &quot;Blue&quot; ]; then
    echo &quot; Found&quot;
    pins=&quot;&quot;
elif [ $machine = &quot;PocketBeagle&quot; ]; then
    echo &quot; Found&quot;
    pins=&quot;P1_31 P2_34 P2_10 P2_24 P2_33&quot;
else
    echo &quot; Not Found&quot;
    pins=&quot;&quot;
fi

for pin in $pins
do
    echo $pin
    config-pin $pin qep
    config-pin -q $pin
done

##########################################
# Configure PRU pins
if [ $machine = &quot;Black&quot; ]; then
    echo &quot; Found&quot;
    pins=&quot;P8_16 P8_15&quot;
elif [ $machine = &quot;Blue&quot; ]; then
    echo &quot; Found&quot;
    pins=&quot;&quot;
elif [ $machine = &quot;PocketBeagle&quot; ]; then
    echo &quot; Found&quot;
    pins=&quot;P2_09 P2_18&quot;
else
    echo &quot; Not Found&quot;
    pins=&quot;&quot;
fi

for pin in $pins
do
    echo $pin
    config-pin $pin pruin
    config-pin -q $pin
done</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_discussion_6"><a class="link" href="#_discussion_6">Discussion</a></h4>
<div class="paragraph">
<p>This works like the servo setup except some of the pins are configured as
to the hardware eQEPs and other to the PRU inputs.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-06-03 19:43:39 -0400
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>